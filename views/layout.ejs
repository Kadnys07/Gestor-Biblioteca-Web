<!DOCTYPE html>
<html lang="pt-BR" class="h-full bg-gray-100">

<head>
  <%- include("partials/header") %>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/tom-select@2.2.2/dist/css/tom-select.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/tom-select@2.2.2/dist/js/tom-select.complete.min.js"></script>
  
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .ts-control {
      border-radius: 0.375rem;
      border-color: #d1d5db;
    }

    /* ARQUITETO: Estilos para tabelas responsivas em ecrãs pequenos */
    @media (max-width: 768px) {
      .responsive-table thead {
        display: none; /* Esconde o cabeçalho da tabela */
      }
      .responsive-table tr {
        display: block; /* Transforma linhas em blocos, como cartões */
        margin-bottom: 1.5rem;
        border-radius: 0.5rem;
        border: 1px solid #e5e7eb; /* Borda cinza clara */
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        background-color: #ffffff;
      }
      .responsive-table td {
        display: flex; /* Alinha o rótulo e o valor */
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem 1rem;
        text-align: right;
        border-bottom: 1px solid #f3f4f6; /* Separador entre os "campos" do cartão */
      }
      .responsive-table tr td:last-child {
        border-bottom: none;
      }
      .responsive-table td::before {
        content: attr(data-label); /* Usa o atributo data-label como rótulo */
        font-weight: 600;
        text-align: left;
        padding-right: 1rem;
        color: #374151; /* Cinza escuro */
      }
    }
  </style>
</head>

<!-- ARQUITETO: Removido 'overflow-hidden' para permitir scroll vertical natural quando necessário -->
<body class="h-full">
  <% if (!hideSidebar) { %>
    <div class="flex h-full">
      <%- include("partials/sidebar") %>
      <div class="flex flex-col flex-1 min-w-0"> <!-- min-w-0 é crucial para o flexbox funcionar bem em ecrãs pequenos -->
        <header class="lg:hidden bg-white shadow-sm flex items-center justify-between p-4">
          <div class="flex items-center text-xl font-bold text-gray-800">
            <i class="ph-bold ph-books mr-2 text-green-700"></i>
            Gestor Biblioteca
          </div>
          <button id="hamburger-button" class="text-gray-600 hover:text-gray-900">
            <i class="ph-bold ph-list text-2xl"></i>
          </button>
        </header>

        <main class="flex-1 p-4 sm:p-6 overflow-y-auto">
          <%- body %>
        </main>
      </div>
    </div>
    <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden lg:hidden"></div>
  <% } else { %>
    <main class="h-full flex items-center justify-center p-4 sm:p-6 bg-gray-100">
      <%- body %>
    </main>
  <% } %>
  <script src="/js/main.js"></script>
</body>
</html>

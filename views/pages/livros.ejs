<!-- Container principal com espaçamento e sombra -->
<div class="bg-white p-6 rounded-xl shadow-lg">
  <!-- Cabeçalho da Seção -->
  <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
    <h1 class="text-3xl font-bold text-gray-800">Acervo de Livros</h1>
    <a href="/livros/novo" class="flex items-center px-4 py-2 font-semibold text-white bg-green-700 rounded-md hover:bg-green-800 transition-colors shadow-sm hover:shadow-md">
      <i class="ph-bold ph-plus mr-2"></i> Adicionar Livro
    </a>
  </div>

  <!-- Barra de Filtros e Pesquisa (Layout Corrigido) -->
  <div class="mb-4 flex flex-col sm:flex-row gap-4">
    <!-- Campo de Pesquisa que cresce para preencher o espaço -->
    <div class="flex-grow">
      <input type="search" id="livro-search" placeholder="Pesquisar por título, autor ou gênero..." class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500 transition">
    </div>
    <!-- Filtro de Status com largura fixa em telas maiores -->
    <div class="w-full sm:w-48">
      <select id="livro-status-filter" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500 transition">
        <option value="todos">Todos os Status</option>
        <option value="disponivel">Disponíveis</option>
        <option value="indisponivel">Indisponíveis</option>
      </select>
    </div>
  </div>

  <!-- Tabela com Wrapper para Responsividade -->
  <div class="overflow-x-auto">
    <table class="w-full whitespace-nowrap" id="tabela-livros">
      <thead class="bg-gray-50">
        <tr>
          <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Título</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Autor</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Gênero</th>
          <th scope="col" class="px-6 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider">Disponível</th>
          <th scope="col" class="px-6 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider">Ações</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        <% livros.forEach(livro => { %>
          <tr class="hover:bg-gray-50 transition-colors"
              data-status="<%= livro.disponivel > 0 ? 'disponivel' : 'indisponivel' %>"
              data-search="<%= livro.titulo.toLowerCase() %> <%= livro.autor.toLowerCase() %> <%= livro.genero.toLowerCase() %>">
            <td class="px-6 py-4 align-middle"><%= livro.titulo %></td>
            <td class="px-6 py-4 align-middle"><%= livro.autor %></td>
            <td class="px-6 py-4 align-middle"><%= livro.genero %></td>
            <td class="px-6 py-4 text-center align-middle"><%= livro.disponivel %></td>
            <td class="px-6 py-4 flex justify-center items-center space-x-4 align-middle">
              <i class="ph ph-pencil-simple text-xl cursor-pointer text-blue-600 hover:text-blue-800 transition-colors"
                 title="Editar Livro"
                 onclick="abrirModalLivro(<%= JSON.stringify(livro) %>, '<%= livro.id %>')"></i>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>

<%- include("../modals/edit_livro") %>

